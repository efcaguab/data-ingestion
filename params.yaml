storage:
  provider: "google"
  bucket: 
    dev: "peskas-storage-dev"
    prod: "peskas-storage-prod"
  auth_file: "`r Sys.getenv('GCS_AUTH_FILE')`"

datasets:
  -
    interface: api
    source_agent: kobo
    data_format: json
    name: catch_timor_unstructured
    url: "https://kobo.humanitarianresponse.info/"
    encoding: "UTF-8"
    config:
      headers:
        Authorization: "`r readLines(Sys.getenv('KOBO_TOKEN_FILE'))`"
    path: 
      - api
      - v2
      - assets
      - aaztUDtRzb9SpSV7i9iptb # survey uid
      - data
  - 
    interface: api
    source_agent: kobo
    data_format: csv
    name: catch_timor_structured
    url: "https://kc.humanitarianresponse.info/"
    config:
      headers:
        Authorization: "`r readLines(Sys.getenv('KOBO_TOKEN_FILE'))`"
    path: 
      - api
      - v1
      - data
      - 344563 # survey id
    query:
      format: csv
  -
    interface: api
    source_agent: pelagic-data-systems
    data_format: csv
    name: "`r paste0('pelagic-data', '_', as.character(Sys.Date()-1))`"
    url: "https://analytics.pelagicdata.com:443"
    config:
      headers: 
        X-API-SECRET: "`r yaml::read_yaml(Sys.getenv('PELAGIC_SECRET_FILE'))$SECRET`"
    path:
      - api
      - "`r yaml::read_yaml(Sys.getenv('PELAGIC_SECRET_FILE'))$API_KEY`"
      - v1
      - points
      - "`r as.character(Sys.Date()-1)`"
      - "`r as.character(Sys.Date())`"
    query:
      deviceInfo: true
